<!DOCTYPE html>
<html lang="">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <title>Demonising</title>
    
    <!--<script>//For the font.
        (function(d) {
            var config = {
                kitId: 'adc2ijs',
                scriptTimeout: 3000,
                async: true
            },
                h=d.documentElement,t=setTimeout(function(){h.className=h.className.replace(/\bwf-loading\b/g,"")+" wf-inactive";},config.scriptTimeout),tk=d.createElement("script"),f=false,s=d.getElementsByTagName("script")[0],a;h.className+=" wf-loading";tk.src='https://use.typekit.net/'+config.kitId+'.js';tk.async=true;tk.onload=tk.onreadystatechange=function(){a=this.readyState;if(f||a&&a!="complete"&&a!="loaded")return;f=true;clearTimeout(t);try{Typekit.load(config)}catch(e){}};s.parentNode.insertBefore(tk,s)
        })(document);
    </script><!--end font-->
</head>

<body>    
    
    <div id="container">
        
        <!--txtSec-->
        <section id="txtSec">
            <div id="indexTxtLeft" class="txtLeft"></div>
            <div id="indexTxtRight" class="txtRight"></div>
            
            <!--<div class="txtLeft"></div>
            <!--<div class="txtRight"></div>
            <div class="txtLeft"></div>
            <div class="txtRight"></div>-->
            
            <div id="txtRefer"></div>
        </section><!--end txtSec-->
        
        <!--imgSec-->
        <section id="imgSec"></section>
    
    </div><!--end container-->
    
    <!--scripts-->
    <script src="script/txtAndImgModule.js"></script>
    <!--<script src="http://code.jquery.com/jquery-2.1.4.min.js"></script>-->
    <script src="script/jquery.js"></script>
    
    <script>    
    //APP pattern (Object literal)
    var WEBPAGEAPP = {
        
        //variabler
        textIndex: 0,
        textRef: 0,
        imageIndex: 0,
        filstiBilder: "img/",
        
        //HTML-objekter
        $indexTxtLeft: null,
        $indexTxtRight: null,
        $txtLeft: null,
        $txtRight: null,
        $txtRefer: null,
        $txtSec: null,
        $imgSec: null,
        
        //init-funksjoner
        init: function(){
            
            var WA = WEBPAGEAPP;            
            
            var setElements = function(){
                WA.$indexTxtLeft = $("#indexTxtLeft");
                WA.$indexTxtRight = $("#indexTxtRight");
                WA.$txtLeft = $(".txtLeft");
                WA.$txtRight = $(".txtRight");
                WA.$txtRefer = $("#txtRefer");
                WA.$txtSec = $("#txtSec");
                WA.$imgSec = $("#imgSec");
            }();
            
            var setEvents = function(){
                //WA.$txtSec.mouseover(WA.scrollTxt);
                WA.$imgSec.click(WA.showNextImg);
                /*WA.$lastWord.click(WA.showNextImg, );*/
                /*WA.$lastWord.click(WA.showTxt);*/
            }();
            
            var setPage = function(){
                //WA.showStartPage();
                //WA.showTxtRef();
                WA.showImage();
                WA.showText();
            }();
            
        }, //--end init
        
        //App-logikk og støttefunksjoner
        showNextImg: function(){
            var WA = WEBPAGEAPP;
            
            if(WA.imageIndex < ( TXTANDIMAGEMODUL.getNumberOfImages() - 1 ) ){
                WA.imageIndex++;
            }else{
                WA.imageIndex = 0;
            } 
            WA.showImage();
        }, //--end showNextImage        
        
        showStartPage: function(){
            var txtIndex = WEBPAGEAPP.textIndex;
            var texts = TXTANDIMAGEMODUL.getTxt(txtIndex);
            
            var $newText1 = $("<p>" + texts.txt1 + "</p>"); //txt1 henter vi frå lista i JSONList
            var $newText2 = $("<p>" + texts.txt2 + "</p>");
            var $newText3 = $("<p>" + texts.txt3 + "</p>");

            WEBPAGEAPP.$indexTxtLeft.prepend($newText1);
            WEBPAGEAPP.$indexTxtRight.append($newText2);
            WEBPAGEAPP.$indexTxtLeft.clone().insertAfter(WEBPAGEAPP.$indexTxtRight).replaceWith($newText3);
            
        },//--end showStartPage
        
        showTxtRef: function(){
            var refIndex = WEBPAGEAPP.textRef;
            var refs = TXTANDIMAGEMODUL.getTxtRef(refIndex);
            
            var $newRef = $("<p>" + refs + "</p>");
            
            WEBPAGEAPP.$txtRefer.append($newRef);
        },//--end showRefTxt

        showText: function(){
            var txtIndex = WEBPAGEAPP.textIndex;
            //var texts = TXTANDIMAGEMODUL.getTxt(txtIndex);
            var textsPage2 = TXTANDIMAGEMODUL.getTxt(1); //Hnter ut heile objektet.
            
            var $newText1 = $("<p>" + textsPage2.txt1 + "</p>");
            var $newText2 = $("<p>" + textsPage2.txt2 + "</p>");
            var $newText3 = $("<p>" + textsPage2.txt3 + "</p>");
            var $newText4 = $("<p>" + textsPage2.txt4 + "</p>");
            var $newText5 = $("<p>" + textsPage2.txt5 + "</p>");
            var $newText6 = $("<p>" + textsPage2.txt6 + "</p>");
            
            /*WEBPAGEAPP.$txtLeft.addClass("txtLeft");
            WEBPAGEAPP.$txtRight.addClass("txtRight");*/
            
            //if(TXTANDIMAGEMODUL.txt1 == true){
            WEBPAGEAPP.$txtLeft.append($newText1);
            WEBPAGEAPP.$txtRight.append($newText2);
            /*WEBPAGEAPP.$txtLeft.last().append($newText3);
            WEBPAGEAPP.$txtRight.last().append($newText4);
            WEBPAGEAPP.$txtLeft.last().append($newText5);
            WEBPAGEAPP.$txtRight.last().append($newText6);*/
            
            //WEBPAGEAPP.$txtLeft.clone().insertAfter(WEBPAGEAPP.$txtRight).replaceWith($newText3);
            
            WEBPAGEAPP.$txtLeft.clone().insertAfter("div.txtRight").replaceWith($newText3);
            WEBPAGEAPP.$txtRight.clone().insertAfter($newText3).replaceWith($newText4);
            WEBPAGEAPP.$txtLeft.clone().insertAfter($newText4).replaceWith($newText5);
            WEBPAGEAPP.$txtRight.clone().insertAfter($newText5).replaceWith($newText6);
            //else/if settning for å få alle sidene?
            //}
            
        },//--end showImage
        
        showImage: function(){
            
            var index = WEBPAGEAPP.imageIndex;
            var filsti = WEBPAGEAPP.filstiBilder;
            
            var bildeSrc = TXTANDIMAGEMODUL.getImg(index);
            
            var $newImage = $("<img>")
                .attr("src", filsti + bildeSrc)
                .animate({"left": "0px", "opacity": "1"}, 1, function(){
                    $(this).prevAll("img").remove();
                });
            
            WEBPAGEAPP.$imgSec.append($newImage);
            
        },//--end showImage
        
        scrollTxt: function(){ //Korleis få denne metoden lukka?
            var distancePerSec = 50;
            
            var h = WEBPAGEAPP.$txtSec.height();
            var targetScrollTop = h + $(window).height();
            var distanceToTravel = targetScrollTop - $(window).scrollTop();
            var animationDuration = (distanceToTravel / distancePerSec) * 1000;
                
            $("html, body").animate({
                scrollTop: targetScrollTop
            }, animationDuration, 'linear');
        }
    };//--end WEBPAGEWAPP
    
    //document.ready trigger vår WEBPAGEAPP når DOM er klart
    $(function(){
        WEBPAGEAPP.init();        
    });   
        
    </script>
    
</body>
    
</html>
